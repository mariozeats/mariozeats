<!-- Sidebar -->
<section id="sidebar">

    <!-- Intro -->
    <section id="intro">
        {{ with .Site.Params.intro }}
            <header>
                <h2>{{ .header }}</h2>
                <p>{{ .paragraph | safeHTML }}</p>
            </header>
        {{ end }}

        <ul class="icons">
            <!-- RSS -->
            {{ $rss := "/" | absURL | printf "%sindex.xml" }}
            <li><a href="{{ $rss }}" type="application/rss+xml" target="_blank" title="RSS" class="fas fa-rss"></a></li>

            <!-- Social icons -->
            {{ if .Site.Params.socialAppearAtTop }}
                {{ partial "social" . }}
            {{ end }}
        </ul>
    </section>

    <!-- Recent Posts -->
    <section id="recent-posts">
        <ul class="posts">
            <header><h3>Recent Posts</h3></header>

            {{ $recentPosts := .Site.RegularPages.ByDate.Reverse }}
            {{ $postLimit := cond (isset .Site.Params.postAmount "sidebar") .Site.Params.postAmount.sidebar 5 }}

            {{ range first $postLimit (where $recentPosts "Type" "post") }}
                <li>
                    <article>
                        <header>
                            <h3><a href="{{ .Permalink }}">{{ .Title }}</a></h3>
                            <time class="published" datetime="{{ .Date.Format "2006-01-02" }}">
                                {{ .Date.Format "January 2, 2006" }}
                            </time>
                        </header>
                    </article>
                </li>
            {{ end }}

            {{ if ge (len (where .Site.RegularPages "Type" "post")) $postLimit }}
                <li>
                    <ul class="actions">
                        <li>
                            <a href="{{ cond (isset .Site.Params "viewMorePostLink") .Site.Params.viewMorePostLink "/post/" }}" class="button">
                                View more posts
                            </a>
                        </li>
                    </ul>
                </li>
            {{ end }}
        </ul>
    </section>

    <!-- About -->
    {{ with .Site.Params.intro.about }}
        <section class="blurb">
            <h2>About</h2>
            <p>{{ . }}</p>
            <ul class="actions">
                <li><a href="/about/" class="button">Learn More</a></li>
            </ul>
        </section>
    {{ end }}

    <!-- Footer -->
    <section id="footer">
        <ul class="icons">
            <li><a href="{{ $rss }}" type="application/rss+xml" target="_blank" title="RSS" class="fas fa-rss"></a></li>
            {{ if .Site.Params.socialAppearAtBottom }}
                {{ partial "social" . }}
            {{ end }}
        </ul>
    </section>

</section>
